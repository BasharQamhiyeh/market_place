<!-- src/app/admin/components/category-detail/category-detail.component.html -->
<mat-card>
  <mat-card-title>
    Category: {{ category?.name }}
    <span style="float:right">
      <button mat-stroked-button color="primary" (click)="openAddAttribute()">
        <mat-icon>add</mat-icon> Add attribute
      </button>
      <button mat-button (click)="load()">Refresh</button>
    </span>
  </mat-card-title>

  <mat-card-content>
    <table mat-table [dataSource]="attributes" class="mat-elevation-z1" style="width:100%">

      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>ID</th>
        <td mat-cell *matCellDef="let a">{{a.id}}</td>
      </ng-container>

      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef>Name</th>
        <td mat-cell *matCellDef="let a">{{a.name}}</td>
      </ng-container>

      <ng-container matColumnDef="type">
        <th mat-header-cell *matHeaderCellDef>Type</th>
        <td mat-cell *matCellDef="let a">{{a.input_type || 'text'}}</td>
      </ng-container>

      <ng-container matColumnDef="required">
        <th mat-header-cell *matHeaderCellDef>Required</th>
        <td mat-cell *matCellDef="let a">{{a.is_required ? 'Yes' : 'No'}}</td>
      </ng-container>

      <ng-container matColumnDef="options">
        <th mat-header-cell *matHeaderCellDef>Options</th>
        <td mat-cell *matCellDef="let a">
          <button mat-button *ngIf="a.input_type === 'select'" (click)="manageOptions(a)">Manage ({{a.options?.length || 0}})</button>
          <span *ngIf="a.input_type !== 'select'">â€”</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let a">
          <button mat-icon-button (click)="editAttribute(a)"><mat-icon>edit</mat-icon></button>
          <button mat-icon-button color="warn" (click)="deleteAttribute(a)"><mat-icon>delete</mat-icon></button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </mat-card-content>
</mat-card>
